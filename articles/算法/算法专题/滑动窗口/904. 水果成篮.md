# 904. 水果成篮
在一排树中，第 i 棵树产生 tree[i] 型的水果。
你可以从你选择的任何树开始，然后重复执行以下步骤：

把这棵树上的水果放进你的篮子里。如果你做不到，就停下来。
移动到当前树右侧的下一棵树。如果右边没有树，就停下来。
请注意，在选择一颗树后，你没有任何选择：你必须执行步骤 1，然后执行步骤 2，然后返回步骤 1，然后执行步骤 2，依此类推，直至停止。

你有两个篮子，每个篮子可以携带任何数量的水果，但你希望每个篮子只携带一种类型的水果。

用这个程序你能收集的水果树的最大总量是多少？

```
输入：[0,1,2,2]
输出：3
解释：我们可以收集 [1,2,2]
如果我们从第一棵树开始，我们将只能收集到 [0, 1]。

输入：[1,2,3,2,2]
输出：4
解释：我们可以收集 [2,3,2,2]
如果我们从第一棵树开始，我们将只能收集到 [1, 2]。
```
- 滑动窗口
- 套用模板，窗口有边界R一直++，过程中把果子放进篮子
- 当果子种类超过2，就执行到篮子，按照顺序把前面第一种的水果全到了，左边界++
- 在这个过程中，不断地记录最大数量
- 时间复杂度 O(n)

```js
/**
 * @param {number[]} fruits
 * @return {number}
 */
var totalFruit = function (tree) {
  let L = R = 0, basket = {}, ans = 0, count = 0
  while (R < tree.length) {
    // 放水果，右边界 ++ 
    let w1 = tree[R++]
    if (basket[w1]) {
      basket[w1]++
    } else {
      basket[w1] = 1
      count++
    }
    // 超过2 倒掉水果
    while (count > 2) {
      let w2 = tree[L++] // 左边界 ++
      basket[w2]--
      if (!basket[w2]) count-- //注意何时清除计数
    }
    ans = Math.max(ans, R - L)
  }
  return ans
};

```